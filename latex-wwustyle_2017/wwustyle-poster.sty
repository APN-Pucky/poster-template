\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wwustyle-poster}[%
	2018/08/19 scientific posters using the WWU corporate design%
]
% Usage: Just put \usepackage{wwustyle-poster} in the preamble of your .tex
%        file!
%        Available options:
%        - english: uses the English claim (“living.knowledge”)
%        - Color variants (see the Corporate design manual
%          https://sso.uni-muenster.de/intern/marketing/corporatedesign/cdmanual.html):
%          pantone312 (“light blue”)
%          pantone3135 (“green”)
%          pantone7462 (“dark blue”)
%
% Maintainers: Simon May (simon.may@uni-muenster.de)
%              Fachschaft Physik (fsphys@uni-muenster.de)

%% =============== required packages ============================
\RequirePackage{tikz}
\RequirePackage{xcolor}
\RequirePackage{graphicx}

%\definecolor{pantoneblack7}{RGB}{62,62,59}
\definecolor{pantoneblack7}{RGB}{102,102,102}
\definecolor{pantone312}{RGB}{0,157,209}    % Hellblau*
\definecolor{pantone315}{RGB}{0,110,137}    % Dunkelblau*
\definecolor{pantone3282}{RGB}{0,142,150}   % Dunkelgruen*
\definecolor{pantone369}{RGB}{122,181,22}   % Hellgruen
\definecolor{pantone390}{RGB}{177,200,0}    % Olivgruen
\definecolor{pantone396}{RGB}{223,219,0}    % Blassgruen
\definecolor{pantoneprozessyellow}{RGB}{255,237,0}

% set pantone390 as the default main color
% Geaendert in pantone312
\newcommand*{\bg@maincolor}{pantone312}

% set the main color
% for the color definitions see
% WWU corporate design manual
\newcommand*{\set@wwu@maincolor}[2]{%
    \renewcommand*{\bg@maincolor}{#1}%
}
\DeclareOption{pantoneblack7}{%
    \set@wwu@maincolor{pantoneblack7}{pantone312}}
\DeclareOption{pantone312}{% Bilder vorhanden
    \set@wwu@maincolor{pantone312}{pantone312}}
\DeclareOption{pantone315}{% Bilder vorhanden
    \set@wwu@maincolor{pantone315}{pantone315}}
\DeclareOption{pantone3282}{% Bilder vorhanden
    \set@wwu@maincolor{pantone3282}{pantone3282}}
\DeclareOption{pantone369}{%
    \set@wwu@maincolor{pantone369}{pantone312}}
\DeclareOption{pantone390}{%
    \set@wwu@maincolor{pantone390}{pantone312}}
\DeclareOption{pantone396}{%
    \set@wwu@maincolor{pantone396}{pantone312}}
\DeclareOption{pantoneprozessyellow}{%
    \set@wwu@maincolor{pantoneprozessyellow}{pantone312}}

% default paper size: DIN A0
\newcommand*{\din@format}{a0paper}
\let\set@poster\set@poster@null
\DeclareOption{a0poster}{%
    \let\set@poster\set@poster@null
}
\newcommand*{\set@poster@null}{
    \renewcommand*{\din@format}{a0paper}%
    \renewcommand*{\maketitle}{\make@poster@title}%
    \def\posterLogoScale{3.5}%
    \def\posterClaimScale{3.5}%
    \def\posterLogoXShift{15cm}%
    \def\posterLogoYShift{-7cm}%
    \def\posterClaimXShift{1cm}%
    \def\posterClaimYShift{2.8cm}%
    \paperwidth=841mm
    \paperheight=1189mm
    \columnsep=20mm
}
\DeclareOption{a1poster}{%
    \let\set@poster\set@poster@one
}
\newcommand*{\set@poster@one}{%
    \renewcommand*{\din@format}{a1paper}
    \renewcommand*{\maketitle}{\make@poster@title}
    \def\posterLogoScale{2.5}%
    \def\posterClaimScale{2.5}%
    \def\posterLogoXShift{11.3cm}%
    \def\posterLogoYShift{-4.9cm}%
    \def\posterClaimXShift{1cm}%
    \def\posterClaimYShift{1.9cm}%
    \paperwidth=594mm
    \paperheight=841mm
    \columnsep=20mm
}

\newcommand*{\claimText}{}
\newcommand*{\switchToEnglish}{
	\renewcommand*{\claimText}{_eng}
}
\DeclareOption{english}{
	\switchToEnglish
}

\newif\if@manualfonts
\DeclareOption{manualfonts}{
	\@manualfontstrue
}

\ProcessOptions\relax

% save the specified color as “maincolor”
\colorlet{maincolor}{\bg@maincolor}
% do font setup if “manualfonts” wasn’t specified
\if@manualfonts\else
	\RequirePackage{wwustyle/meta-office-pro}
\fi


%% ========= Images and Graphics ============

% the claim with \includegraphics
%% parameter #1: scale
\newcommand*{\claim}[1]{%
	\strut\hskip\posterClaimXShift\rlap{\includegraphics[scale=#1]{wwustyle/WWU_Claim_2017\claimText_negativ}}%
}

% WWU logo with \includegraphics
%% parameter #1: scale
\newcommand*{\wwulogoposter}[1]{%
	\includegraphics[scale=#1]{wwustyle/WWUMuenster_Logo_2017_negativ}%
}

\set@poster

\newcommand{\make@poster@title}{ %replace standard LaTeX-command
 {%
 \setlength{\unitlength}{1mm}%
 \begin{tikzpicture}[remember picture,overlay]
    %% Querbalken oben
    \node [anchor=north west] at (current page.north west)
    [rectangle,
    inner sep=0mm,
    minimum height=0.12\paperheight,
    minimum width=\paperwidth,
    fill=maincolor
    ] {};
    % Querbalken unten
    \node [yshift=-0.94\paperheight, anchor=north west] at (current page.north west)
    [rectangle,
    inner sep=0mm,
    minimum height=0.06\paperheight,
    minimum width=\paperwidth,
    fill=maincolor
    ] {};
    \node [xshift=\posterLogoXShift,yshift=\posterLogoYShift] at (current page.north west)
    {\wwulogoposter{\posterLogoScale}};
    %% the claim
    \node [xshift=\posterClaimXShift, yshift=\posterClaimYShift, inner sep=0, anchor=south west] at (current page.south west)
    (claim) {\claim{\posterClaimScale}};
  \end{tikzpicture}%
  }\ignorespaces
}

\textheight=0.77\paperheight
\topmargin=0.10\paperheight
\oddsidemargin=\dimexpr \columnsep -1in\relax
\evensidemargin=\oddsidemargin
\textwidth=\dimexpr\paperwidth-2\columnsep\relax

\leftmargini=20pt
\renewcommand\normalsize{%
   \@setfontsize\normalsize{20pt}{24pt}
   \abovedisplayskip 20\p@ \@plus6\p@ \@minus5\p@
   \abovedisplayshortskip \z@ \@plus9\p@
   \belowdisplayshortskip 12\p@ \@plus9\p@ \@minus3\p@
   \belowdisplayskip \abovedisplayskip
   \let\@listi\@listI}
\normalsize
\renewcommand\small{%
   \@setfontsize\small{16pt}{19pt}
   \abovedisplayskip 14\p@ \@plus5\p@ \@minus4\p@
   \abovedisplayshortskip \z@ \@plus4\p@
   \belowdisplayshortskip 8\p@ \@plus4\p@ \@minus3\p@
   \def\@listi{\leftmargin\leftmargini
               \topsep 4\p@ \@plus2\p@ \@minus2\p@
               \parsep 2\p@ \@plus\p@ \@minus\p@
               \itemsep \parsep}%
   \belowdisplayskip \abovedisplayskip
}
\renewcommand\footnotesize{%
   \@setfontsize\footnotesize{14pt}{16.8pt}%
   \abovedisplayskip 6\p@ \@plus2\p@ \@minus4\p@
   \abovedisplayshortskip \z@ \@plus\p@
   \belowdisplayshortskip 3\p@ \@plus\p@ \@minus2\p@
   \def\@listi{\leftmargin\leftmargini
               \topsep 3\p@ \@plus\p@ \@minus\p@
               \parsep 2\p@ \@plus\p@ \@minus\p@
               \itemsep \parsep}%
   \belowdisplayskip \abovedisplayskip
}
\renewcommand\scriptsize{\@setfontsize\scriptsize\@viipt\@viiipt}
\renewcommand\tiny{\@setfontsize\tiny\@vpt\@vipt}
\renewcommand\large{\@setfontsize\large{40pt}{48pt}}
\renewcommand\Large{\@setfontsize\Large{60pt}{72pt}}
\renewcommand\LARGE{\@setfontsize\LARGE{70pt}{84pt}}
\renewcommand\huge{\@setfontsize\huge{75pt}{90pt}}
\renewcommand\Huge{\@setfontsize\Huge{80pt}{96pt}}
\setlength\parindent{0pt}
\setlength\parskip{3mm plus 0.5mm minus 0.5mm}
\setlength\smallskipamount{3\p@ \@plus 1\p@ \@minus 1\p@}
\setlength\medskipamount{6\p@ \@plus 2\p@ \@minus 2\p@}
\setlength\bigskipamount{12\p@ \@plus 4\p@ \@minus 4\p@}
\setlength\headheight{12\p@}
\setlength\headsep   {25\p@}
\setlength\topskip   {10\p@}
\setlength\footskip{30\p@}
\if@compatibility \setlength\maxdepth{4\p@} \else
\setlength\maxdepth{.5\topskip} \fi
\if@twocolumn
 \setlength\marginparsep {10\p@}
\else
  \setlength\marginparsep{11\p@}
\fi
\setlength\marginparpush{5\p@}
\setlength\footnotesep{6.65\p@}
\setlength{\skip\footins}{9\p@ \@plus 4\p@ \@minus 2\p@}
\setlength\floatsep    {12\p@ \@plus 2\p@ \@minus 2\p@}
\setlength\textfloatsep{20\p@ \@plus 2\p@ \@minus 4\p@}
\setlength\intextsep   {12\p@ \@plus 2\p@ \@minus 2\p@}
\setlength\dblfloatsep    {12\p@ \@plus 2\p@ \@minus 2\p@}
\setlength\dbltextfloatsep{20\p@ \@plus 2\p@ \@minus 4\p@}
\setlength\@fptop{0\p@ \@plus 1fil}
\setlength\@fpsep{8\p@ \@plus 2fil}
\setlength\@fpbot{0\p@ \@plus 1fil}
\setlength\@dblfptop{0\p@ \@plus 1fil}
\setlength\@dblfpsep{8\p@ \@plus 2fil}
\setlength\@dblfpbot{0\p@ \@plus 1fil}
\setlength\partopsep{2\p@ \@plus 1\p@ \@minus 1\p@}
\def\@listi{\leftmargin\leftmargini
            \parsep 4\p@ \@plus2\p@ \@minus\p@
            \topsep 8\p@ \@plus2\p@ \@minus4\p@
            \itemsep4\p@ \@plus2\p@ \@minus\p@}
\let\@listI\@listi
\@listi
\def\@listii {\leftmargin\leftmarginii
              \labelwidth\leftmarginii
              \advance\labelwidth-\labelsep
              \topsep    4\p@ \@plus2\p@ \@minus\p@
              \parsep    2\p@ \@plus\p@  \@minus\p@
              \itemsep   \parsep}
\def\@listiii{\leftmargin\leftmarginiii
              \labelwidth\leftmarginiii
              \advance\labelwidth-\labelsep
              \topsep    2\p@ \@plus\p@\@minus\p@
              \parsep    \z@
              \partopsep \p@ \@plus\z@ \@minus\p@
              \itemsep   \topsep}
\def\@listiv {\leftmargin\leftmarginiv
              \labelwidth\leftmarginiv
              \advance\labelwidth-\labelsep}
\def\@listv  {\leftmargin\leftmarginv
              \labelwidth\leftmarginv
              \advance\labelwidth-\labelsep}
\def\@listvi {\leftmargin\leftmarginvi
              \labelwidth\leftmarginvi
              \advance\labelwidth-\labelsep}

\renewcommand\section{\@startsection {section}{1}{\z@}%
                                   {-2.5ex \@plus -1ex \@minus -.2ex}%
                                   {.3ex \@plus.2ex}%
                                   {\normalfont\Large\color{maincolor}}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-2.25ex\@plus -1ex \@minus -.2ex}%
                                     {.3ex \@plus .2ex}%
                                     {\normalfont\large\color{maincolor}}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
                                     {-2.25ex\@plus -1ex \@minus -.2ex}%
                                     {.3ex \@plus .2ex}%
                                     {\normalfont\normalsize\color{maincolor}}}
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
                                    {2.25ex \@plus1ex \@minus.2ex}%
                                    {-1em}%
                                    {\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{5}{\parindent}%
                                       {3.25ex \@plus1ex \@minus .2ex}%
                                       {-1em}%
                                      {\normalfont\normalsize\color{maincolor}}}


\newcommand*{\postersubject}[1]{{\Huge\color{maincolor} #1\par}\vskip2\baselineskip}

\newcommand*{\posterauthor}[1]{{\large #1\par}\vskip1\baselineskip}

% posterbox entspricht im wesentlichen \fbox.
\newbox\@posterfbox

\newcommand{\posterbox}{%
    \fboxsep=10mm%
    \fboxrule=1pt%
    \setbox\@posterfbox\vbox\bgroup%
    \hsize=\linewidth%
    \advance\hsize by -2\fboxsep%
    \advance\hsize by -2\fboxrule%
}

\def\endposterbox{\egroup{\posterfbox{\box\@posterfbox}}}

\long\def\posterfbox#1{%
  \leavevmode
  \setbox\@tempboxa\hbox{%
    \color@begingroup
      \kern\fboxsep{#1}\kern\fboxsep
    \color@endgroup}%
  \poster@frameb@x\relax}

\def\poster@frameb@x#1{%
  \@tempdima\fboxrule
  \advance\@tempdima\fboxsep
  \advance\@tempdima\dp\@tempboxa
  \hbox{%
    \lower\@tempdima\hbox{%
      \vbox{%
    \color@begingroup
    \color{maincolor}
        \hrule\@height\fboxrule
    \color@endgroup
        \hbox{%
    \color@begingroup
    \color{maincolor}
          \vrule\@width\fboxrule
    \color@endgroup
          #1%
          \vbox{%
            \vskip\fboxsep
            \box\@tempboxa
            \vskip\fboxsep}%
          #1%
    \color@begingroup
    \color{maincolor}
          \vrule\@width\fboxrule
    \color@endgroup
          }%
    \color@begingroup
    \color{maincolor}
        \hrule\@height\fboxrule
    \color@endgroup
        }%
                          }%
        }%
}

\pagestyle{empty}
